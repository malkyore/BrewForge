@page "/editor"

@using Craftly.Beer_Blazor.ComponentClasses;
@using Beernet_Lib.Models;
@{
    if (RecipeHelper.isLoggedIn)
    {
        <MainNav refreshParent=@refresh />
    }
}
<Craftly.Beer_Blazor.Shared.RecipeEditor Model=@Model> </Craftly.Beer_Blazor.Shared.RecipeEditor>

@code
{
    [Parameter]
    public static string recipeId { get; set; }

    public static recipe Model { get; set; }

    protected override async Task OnInitializedAsync()
    {
        if (RecipeHelper.currentRecipeId != "-1")
        {
            Model = RecipeHelper.GetRecipeDetails(RecipeHelper.currentRecipeId);
        }
        else
        {
            Model = RecipeHelper.initializeBlankRecipe();
        }

    }

    public async void refresh()
    {
        StateHasChanged();
    }
}
